{"version":3,"file":"static/webpack/static/development/pages/login.js.82fd7d259a299e45bd65.hot-update.js","sources":["webpack:///./pages/login.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router'\nimport cookies from 'next-cookies';\nimport { login } from '../utils/auth';\n\nconst Login = ({ apiUrl, token }) => {\n  const [state, setState] = useState({\n    username: '',\n    password: '',\n    error: ''\n  });\n\n  // useEffect(() => {\n  //   if(token){\n  //   }\n  // });\n\n  const handleChange = (e) => {\n    setState({\n      ...state,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault()\n    const username = state.username;\n    const url = apiUrl\n\n    try {\n      const response = await axios.post(url, {\n        email: username,\n        password: state.password\n      });\n\n      if (response.data) {\n        login({ token: response.data.token })\n      }\n\n    } catch (error) {\n      console.log('Error', error);\n    }\n  }\n\n  return (\n    <div>\n      <div className='login'>\n        <form onSubmit={handleSubmit}>\n          <label htmlFor='username'>Login</label>\n\n          <input\n            type='text'\n            id='username'\n            name='username'\n            value={state.username}\n            onChange={handleChange}\n          />\n\n          <input\n            type='password'\n            id='password'\n            name='password'\n            value={state.password}\n            onChange={handleChange}\n          />\n\n          <button type='submit'>Login</button>\n\n          <p className={`error ${state.error && 'show'}`}>\n            {state.error && `Error: ${state.error}`}\n          </p>\n        </form>\n      </div>\n      <style jsx>{`\n        .login {\n          max-width: 340px;\n          margin: 0 auto;\n          padding: 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        form {\n          display: flex;\n          flex-flow: column;\n        }\n        label {\n          font-weight: 600;\n        }\n        input {\n          padding: 8px;\n          margin: 0.3rem 0 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        .error {\n          margin: 0.5rem 0 0;\n          display: none;\n          color: brown;\n        }\n        .error.show {\n          display: block;\n        }\n      `}</style>\n    </div>\n  )\n}\n\nLogin.getInitialProps = ctx => {\n  const apiUrl = 'http://localhost:4000/authenticate';\n  const { token } = cookies(ctx);\n\n  if (token) {\n    if (ctx.res) {\n      ctx.res.writeHead(302, { Location: '/' })\n      ctx.res.end()\n    } else {\n      document.location.pathname = path\n    }\n  };\n\n  return { apiUrl, token }\n}\n\nexport default Login;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AAHA;AADA;AAAA;AAQA;AACA;AACA;AACA;AACA;AAAA;AACA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAOA;AACA;AAFA;AACA;AAPA;AAMA;AACA;AAIA;AACA;AAAA;AAAA;AACA;AACA;AAdA;AAAA;AACA;AADA;AAAA;AAAA;AAgBA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAmBA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAvBA;AAAA;AAAA;AA4DA;AACA;AACA;AACA;AACA;AAFA;AAAA;AACA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;A","sourceRoot":""}
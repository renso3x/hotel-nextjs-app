{"ast":null,"code":"var _jsxFileName = \"/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router';\nimport cookies from 'next-cookies';\nimport { login } from '../utils/auth';\n\nconst Login = ({\n  apiUrl,\n  token\n}) => {\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    username: '',\n    password: '',\n    error: ''\n  });\n  useEffect(() => {\n    if (token) {\n      Router.push('/');\n    }\n  });\n\n  const handleChange = e => {\n    setState(_objectSpread({}, state, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const username = state.username;\n    const url = apiUrl;\n\n    try {\n      const response = await axios.post(url, {\n        email: username,\n        password: state.password\n      });\n\n      if (response.data) {\n        login({\n          token: response.data.token\n        });\n      }\n    } catch (error) {\n      console.log('Error', error);\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-458047844\" + \" \" + 'login',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, __jsx(\"label\", {\n    htmlFor: \"username\",\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"Login\"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    name: \"username\",\n    value: state.username,\n    onChange: handleChange,\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    value: state.password,\n    onChange: handleChange,\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Login\"), __jsx(\"p\", {\n    className: \"jsx-458047844\" + \" \" + `error ${state.error && 'show'}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, state.error && `Error: ${state.error}`))), __jsx(_JSXStyle, {\n    id: \"458047844\",\n    __self: this\n  }, \".login.jsx-458047844{max-width:340px;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}form.jsx-458047844{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}label.jsx-458047844{font-weight:600;}input.jsx-458047844{padding:8px;margin:0.3rem 0 1rem;border:1px solid #ccc;border-radius:4px;}.error.jsx-458047844{margin:0.5rem 0 0;display:none;color:brown;}.error.show.jsx-458047844{display:block;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb21lb2Vuc28vRGVza3RvcC9yZWZsdWVucy9yZWZsdWVucy1ob3RlbC1yZXNlcnZhdGlvbi9ob3RlbC1hcHAvcGFnZXMvbG9naW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMkVrQixBQUcyQixBQU9ILEFBSUcsQUFHSixBQU1NLEFBS0osWUFWTyxFQVd2QixFQXpCZ0IsQUFXaEIsRUFTZSxZQW5CQSxDQW9CRCxFQU5VLFVBYkEsQUFvQnhCLFlBTm9CLFVBYkEsUUFjcEIsQ0FWbUIsU0FIbkIsc0RBSUEiLCJmaWxlIjoiL1VzZXJzL3JvbWVvZW5zby9EZXNrdG9wL3JlZmx1ZW5zL3JlZmx1ZW5zLWhvdGVsLXJlc2VydmF0aW9uL2hvdGVsLWFwcC9wYWdlcy9sb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IFJvdXRlciBmcm9tICduZXh0L3JvdXRlcidcbmltcG9ydCBjb29raWVzIGZyb20gJ25leHQtY29va2llcyc7XG5pbXBvcnQgeyBsb2dpbiB9IGZyb20gJy4uL3V0aWxzL2F1dGgnO1xuXG5jb25zdCBMb2dpbiA9ICh7IGFwaVVybCwgdG9rZW4gfSkgPT4ge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICB1c2VybmFtZTogJycsXG4gICAgcGFzc3dvcmQ6ICcnLFxuICAgIGVycm9yOiAnJ1xuICB9KTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmKHRva2VuKXtcbiAgICAgIFJvdXRlci5wdXNoKCcvJylcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IGhhbmRsZUNoYW5nZSA9IChlKSA9PiB7XG4gICAgc2V0U3RhdGUoe1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBbZS50YXJnZXQubmFtZV06IGUudGFyZ2V0LnZhbHVlXG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdXNlcm5hbWUgPSBzdGF0ZS51c2VybmFtZTtcbiAgICBjb25zdCB1cmwgPSBhcGlVcmxcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QodXJsLCB7XG4gICAgICAgIGVtYWlsOiB1c2VybmFtZSxcbiAgICAgICAgcGFzc3dvcmQ6IHN0YXRlLnBhc3N3b3JkXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgbG9naW4oeyB0b2tlbjogcmVzcG9uc2UuZGF0YS50b2tlbiB9KVxuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdFcnJvcicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbG9naW4nPlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0ndXNlcm5hbWUnPkxvZ2luPC9sYWJlbD5cblxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgIGlkPSd1c2VybmFtZSdcbiAgICAgICAgICAgIG5hbWU9J3VzZXJuYW1lJ1xuICAgICAgICAgICAgdmFsdWU9e3N0YXRlLnVzZXJuYW1lfVxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAvPlxuXG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPSdwYXNzd29yZCdcbiAgICAgICAgICAgIGlkPSdwYXNzd29yZCdcbiAgICAgICAgICAgIG5hbWU9J3Bhc3N3b3JkJ1xuICAgICAgICAgICAgdmFsdWU9e3N0YXRlLnBhc3N3b3JkfVxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAvPlxuXG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPSdzdWJtaXQnPkxvZ2luPC9idXR0b24+XG5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9e2BlcnJvciAke3N0YXRlLmVycm9yICYmICdzaG93J31gfT5cbiAgICAgICAgICAgIHtzdGF0ZS5lcnJvciAmJiBgRXJyb3I6ICR7c3RhdGUuZXJyb3J9YH1cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAubG9naW4ge1xuICAgICAgICAgIG1heC13aWR0aDogMzQwcHg7XG4gICAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgICAgcGFkZGluZzogMXJlbTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgfVxuICAgICAgICBmb3JtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZmxvdzogY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIGxhYmVsIHtcbiAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICB9XG4gICAgICAgIGlucHV0IHtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgbWFyZ2luOiAwLjNyZW0gMCAxcmVtO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB9XG4gICAgICAgIC5lcnJvciB7XG4gICAgICAgICAgbWFyZ2luOiAwLjVyZW0gMCAwO1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgICAgY29sb3I6IGJyb3duO1xuICAgICAgICB9XG4gICAgICAgIC5lcnJvci5zaG93IHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvZGl2PlxuICApXG59XG5cbkxvZ2luLmdldEluaXRpYWxQcm9wcyA9IGN0eCA9PiB7XG4gIGNvbnN0IGFwaVVybCA9ICdodHRwOi8vbG9jYWxob3N0OjQwMDAvYXV0aGVudGljYXRlJztcbiAgY29uc3QgeyB0b2tlbiB9ID0gY29va2llcyhjdHgpO1xuICByZXR1cm4geyBhcGlVcmwsIHRva2VuIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTG9naW47Il19 */\\n/*@ sourceURL=/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js */\"));\n};\n\nLogin.getInitialProps = ctx => {\n  const apiUrl = 'http://localhost:4000/authenticate';\n  const {\n    token\n  } = cookies(ctx);\n  return {\n    apiUrl,\n    token\n  };\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js"],"names":["useState","useEffect","axios","Router","cookies","login","Login","apiUrl","token","state","setState","username","password","error","push","handleChange","e","target","name","value","handleSubmit","event","preventDefault","url","response","post","email","data","console","log","getInitialProps","ctx"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router'\nimport cookies from 'next-cookies';\nimport { login } from '../utils/auth';\n\nconst Login = ({ apiUrl, token }) => {\n  const [state, setState] = useState({\n    username: '',\n    password: '',\n    error: ''\n  });\n\n  useEffect(() => {\n    if(token){\n      Router.push('/')\n    }\n  });\n\n  const handleChange = (e) => {\n    setState({\n      ...state,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault()\n    const username = state.username;\n    const url = apiUrl\n\n    try {\n      const response = await axios.post(url, {\n        email: username,\n        password: state.password\n      });\n\n      if (response.data) {\n        login({ token: response.data.token })\n      }\n\n    } catch (error) {\n      console.log('Error', error);\n    }\n  }\n\n  return (\n    <div>\n      <div className='login'>\n        <form onSubmit={handleSubmit}>\n          <label htmlFor='username'>Login</label>\n\n          <input\n            type='text'\n            id='username'\n            name='username'\n            value={state.username}\n            onChange={handleChange}\n          />\n\n          <input\n            type='password'\n            id='password'\n            name='password'\n            value={state.password}\n            onChange={handleChange}\n          />\n\n          <button type='submit'>Login</button>\n\n          <p className={`error ${state.error && 'show'}`}>\n            {state.error && `Error: ${state.error}`}\n          </p>\n        </form>\n      </div>\n      <style jsx>{`\n        .login {\n          max-width: 340px;\n          margin: 0 auto;\n          padding: 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        form {\n          display: flex;\n          flex-flow: column;\n        }\n        label {\n          font-weight: 600;\n        }\n        input {\n          padding: 8px;\n          margin: 0.3rem 0 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        .error {\n          margin: 0.5rem 0 0;\n          display: none;\n          color: brown;\n        }\n        .error.show {\n          display: block;\n        }\n      `}</style>\n    </div>\n  )\n}\n\nLogin.getInitialProps = ctx => {\n  const apiUrl = 'http://localhost:4000/authenticate';\n  const { token } = cookies(ctx);\n  return { apiUrl, token }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}
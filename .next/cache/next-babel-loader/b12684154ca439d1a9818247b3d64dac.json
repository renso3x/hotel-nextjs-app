{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js\";\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router';\nimport cookies from 'next-cookies';\nimport { login, auth } from '../utils/auth';\n\nvar Login = function Login(_ref) {\n  var apiUrl = _ref.apiUrl;\n\n  var _useState = useState({\n    username: '',\n    password: '',\n    error: ''\n  });\n\n  var _useState2 = _slicedToArray(_useState, 2);\n\n  state = _useState2[0];\n  setState = _useState2[1];\n\n  var handleChange = function handleChange(e) {\n    setState(_objectSpread({}, state, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var handleSubmit = function handleSubmit(event) {\n    var username, url, response;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            event.preventDefault();\n            username = state.username;\n            url = apiUrl;\n            _context.prev = 3;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(axios.post(url, {\n              email: username,\n              password: state.password\n            }));\n\n          case 6:\n            response = _context.sent;\n\n            if (response.data) {\n              login({\n                token: response.data.token\n              });\n            }\n\n            _context.next = 13;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](3);\n            console.log('Error', _context.t0);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 10]], Promise);\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-458047844\" + \" \" + 'login',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, __jsx(\"form\", {\n    onSubmit: _this.handleSubmit,\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, __jsx(\"label\", {\n    htmlFor: \"username\",\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"Login\"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    name: \"username\",\n    value: _this.state.username,\n    onChange: _this.handleChange,\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    value: _this.state.password,\n    onChange: _this.handleChange,\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Login\"), __jsx(\"p\", {\n    className: \"jsx-458047844\" + \" \" + \"error \".concat(_this.state.error && 'show'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, _this.state.error && \"Error: \".concat(_this.state.error)))), __jsx(_JSXStyle, {\n    id: \"458047844\",\n    __self: this\n  }, \".login.jsx-458047844{max-width:340px;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}form.jsx-458047844{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}label.jsx-458047844{font-weight:600;}input.jsx-458047844{padding:8px;margin:0.3rem 0 1rem;border:1px solid #ccc;border-radius:4px;}.error.jsx-458047844{margin:0.5rem 0 0;display:none;color:brown;}.error.show.jsx-458047844{display:block;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb21lb2Vuc28vRGVza3RvcC9yZWZsdWVucy9yZWZsdWVucy1ob3RlbC1yZXNlcnZhdGlvbi9ob3RlbC1hcHAvcGFnZXMvbG9naW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBcUVrQixBQUcyQixBQU9ILEFBSUcsQUFHSixBQU1NLEFBS0osWUFWTyxFQVd2QixFQXpCZ0IsQUFXaEIsRUFTZSxZQW5CQSxDQW9CRCxFQU5VLFVBYkEsQUFvQnhCLFlBTm9CLFVBYkEsUUFjcEIsQ0FWbUIsU0FIbkIsc0RBSUEiLCJmaWxlIjoiL1VzZXJzL3JvbWVvZW5zby9EZXNrdG9wL3JlZmx1ZW5zL3JlZmx1ZW5zLWhvdGVsLXJlc2VydmF0aW9uL2hvdGVsLWFwcC9wYWdlcy9sb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBSb3V0ZXIgZnJvbSAnbmV4dC9yb3V0ZXInXG5pbXBvcnQgY29va2llcyBmcm9tICduZXh0LWNvb2tpZXMnO1xuaW1wb3J0IHsgbG9naW4sIGF1dGggfSBmcm9tICcuLi91dGlscy9hdXRoJztcblxuY29uc3QgTG9naW4gPSAoeyBhcGlVcmwgfSkgPT4ge1xuICBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICB1c2VybmFtZTogJycsXG4gICAgcGFzc3dvcmQ6ICcnLFxuICAgIGVycm9yOiAnJ1xuICB9KTtcblxuICBjb25zdCBoYW5kbGVDaGFuZ2UgPSAoZSkgPT4ge1xuICAgIHNldFN0YXRlKHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgW2UudGFyZ2V0Lm5hbWVdOiBlLnRhcmdldC52YWx1ZVxuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHVzZXJuYW1lID0gc3RhdGUudXNlcm5hbWU7XG4gICAgY29uc3QgdXJsID0gYXBpVXJsXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KHVybCwge1xuICAgICAgICBlbWFpbDogdXNlcm5hbWUsXG4gICAgICAgIHBhc3N3b3JkOiBzdGF0ZS5wYXNzd29yZFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIGxvZ2luKHsgdG9rZW46IHJlc3BvbnNlLmRhdGEudG9rZW4gfSlcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnRXJyb3InLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2xvZ2luJz5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fT5cbiAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0ndXNlcm5hbWUnPkxvZ2luPC9sYWJlbD5cblxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgIGlkPSd1c2VybmFtZSdcbiAgICAgICAgICAgIG5hbWU9J3VzZXJuYW1lJ1xuICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudXNlcm5hbWV9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgLz5cblxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT0ncGFzc3dvcmQnXG4gICAgICAgICAgICBpZD0ncGFzc3dvcmQnXG4gICAgICAgICAgICBuYW1lPSdwYXNzd29yZCdcbiAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnBhc3N3b3JkfVxuICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9J3N1Ym1pdCc+TG9naW48L2J1dHRvbj5cblxuICAgICAgICAgIDxwIGNsYXNzTmFtZT17YGVycm9yICR7dGhpcy5zdGF0ZS5lcnJvciAmJiAnc2hvdyd9YH0+XG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS5lcnJvciAmJiBgRXJyb3I6ICR7dGhpcy5zdGF0ZS5lcnJvcn1gfVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9kaXY+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5sb2dpbiB7XG4gICAgICAgICAgbWF4LXdpZHRoOiAzNDBweDtcbiAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICBwYWRkaW5nOiAxcmVtO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB9XG4gICAgICAgIGZvcm0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1mbG93OiBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgbGFiZWwge1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQge1xuICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICBtYXJnaW46IDAuM3JlbSAwIDFyZW07XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIH1cbiAgICAgICAgLmVycm9yIHtcbiAgICAgICAgICBtYXJnaW46IDAuNXJlbSAwIDA7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgICBjb2xvcjogYnJvd247XG4gICAgICAgIH1cbiAgICAgICAgLmVycm9yLnNob3cge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuTG9naW4uZ2V0SW5pdGlhbFByb3BzID0gY3R4ID0+IHtcbiAgY29uc3QgYXBpVXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9hdXRoZW50aWNhdGUnO1xuICBjb25zdCB7IHRva2VuIH0gPSBjb29raWVzKGN0eCk7XG4gIHJldHVybiB7IGFwaVVybCwgdG9rZW4gfVxufVxuXG5leHBvcnQgZGVmYXVsdCBMb2dpbjsiXX0= */\\n/*@ sourceURL=/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js */\"));\n};\n\nLogin.getInitialProps = function (ctx) {\n  var apiUrl = 'http://localhost:4000/authenticate';\n\n  var _cookies = cookies(ctx),\n      token = _cookies.token;\n\n  return {\n    apiUrl: apiUrl,\n    token: token\n  };\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js"],"names":["useState","axios","Router","cookies","login","auth","Login","apiUrl","username","password","error","state","setState","handleChange","e","target","name","value","handleSubmit","event","preventDefault","url","post","email","response","data","token","console","log","getInitialProps","ctx"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router'\nimport cookies from 'next-cookies';\nimport { login, auth } from '../utils/auth';\n\nconst Login = ({ apiUrl }) => {\n  [state, setState] = useState({\n    username: '',\n    password: '',\n    error: ''\n  });\n\n  const handleChange = (e) => {\n    setState({\n      ...state,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault()\n    const username = state.username;\n    const url = apiUrl\n\n    try {\n      const response = await axios.post(url, {\n        email: username,\n        password: state.password\n      });\n\n      if (response.data) {\n        login({ token: response.data.token })\n      }\n\n    } catch (error) {\n      console.log('Error', error);\n    }\n  }\n\n  return (\n    <div>\n      <div className='login'>\n        <form onSubmit={this.handleSubmit}>\n          <label htmlFor='username'>Login</label>\n\n          <input\n            type='text'\n            id='username'\n            name='username'\n            value={this.state.username}\n            onChange={this.handleChange}\n          />\n\n          <input\n            type='password'\n            id='password'\n            name='password'\n            value={this.state.password}\n            onChange={this.handleChange}\n          />\n\n          <button type='submit'>Login</button>\n\n          <p className={`error ${this.state.error && 'show'}`}>\n            {this.state.error && `Error: ${this.state.error}`}\n          </p>\n        </form>\n      </div>\n      <style jsx>{`\n        .login {\n          max-width: 340px;\n          margin: 0 auto;\n          padding: 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        form {\n          display: flex;\n          flex-flow: column;\n        }\n        label {\n          font-weight: 600;\n        }\n        input {\n          padding: 8px;\n          margin: 0.3rem 0 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        .error {\n          margin: 0.5rem 0 0;\n          display: none;\n          color: brown;\n        }\n        .error.show {\n          display: block;\n        }\n      `}</style>\n    </div>\n  )\n}\n\nLogin.getInitialProps = ctx => {\n  const apiUrl = 'http://localhost:4000/authenticate';\n  const { token } = cookies(ctx);\n  return { apiUrl, token }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}
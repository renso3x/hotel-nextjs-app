{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router';\nimport cookies from 'next-cookies';\nimport { login, auth } from '../utils/auth';\n\nvar Login = function Login(_ref) {\n  var apiUrl = _ref.apiUrl;\n\n  var _useState = useState({\n    username: '',\n    password: '',\n    error: ''\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var handleChange = function handleChange(e) {\n    setState(_objectSpread({}, state, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var handleSubmit = function handleSubmit(event) {\n    var username, url, response;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            event.preventDefault();\n            username = state.username;\n            url = apiUrl;\n            _context.prev = 3;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(axios.post(url, {\n              email: username,\n              password: state.password\n            }));\n\n          case 6:\n            response = _context.sent;\n\n            if (response.data) {\n              login({\n                token: response.data.token\n              });\n            }\n\n            _context.next = 13;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](3);\n            console.log('Error', _context.t0);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 10]], Promise);\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-458047844\" + \" \" + 'login',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, __jsx(\"label\", {\n    htmlFor: \"username\",\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"Login\"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    name: \"username\",\n    value: state.username,\n    onChange: handleChange,\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    value: state.password,\n    onChange: handleChange,\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-458047844\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Login\"), __jsx(\"p\", {\n    className: \"jsx-458047844\" + \" \" + \"error \".concat(state.error && 'show'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, state.error && \"Error: \".concat(state.error)))), __jsx(_JSXStyle, {\n    id: \"458047844\",\n    __self: this\n  }, \".login.jsx-458047844{max-width:340px;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}form.jsx-458047844{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}label.jsx-458047844{font-weight:600;}input.jsx-458047844{padding:8px;margin:0.3rem 0 1rem;border:1px solid #ccc;border-radius:4px;}.error.jsx-458047844{margin:0.5rem 0 0;display:none;color:brown;}.error.show.jsx-458047844{display:block;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb21lb2Vuc28vRGVza3RvcC9yZWZsdWVucy9yZWZsdWVucy1ob3RlbC1yZXNlcnZhdGlvbi9ob3RlbC1hcHAvcGFnZXMvbG9naW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBcUVrQixBQUcyQixBQU9ILEFBSUcsQUFHSixBQU1NLEFBS0osWUFWTyxFQVd2QixFQXpCZ0IsQUFXaEIsRUFTZSxZQW5CQSxDQW9CRCxFQU5VLFVBYkEsQUFvQnhCLFlBTm9CLFVBYkEsUUFjcEIsQ0FWbUIsU0FIbkIsc0RBSUEiLCJmaWxlIjoiL1VzZXJzL3JvbWVvZW5zby9EZXNrdG9wL3JlZmx1ZW5zL3JlZmx1ZW5zLWhvdGVsLXJlc2VydmF0aW9uL2hvdGVsLWFwcC9wYWdlcy9sb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBSb3V0ZXIgZnJvbSAnbmV4dC9yb3V0ZXInXG5pbXBvcnQgY29va2llcyBmcm9tICduZXh0LWNvb2tpZXMnO1xuaW1wb3J0IHsgbG9naW4sIGF1dGggfSBmcm9tICcuLi91dGlscy9hdXRoJztcblxuY29uc3QgTG9naW4gPSAoeyBhcGlVcmwgfSkgPT4ge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICB1c2VybmFtZTogJycsXG4gICAgcGFzc3dvcmQ6ICcnLFxuICAgIGVycm9yOiAnJ1xuICB9KTtcblxuICBjb25zdCBoYW5kbGVDaGFuZ2UgPSAoZSkgPT4ge1xuICAgIHNldFN0YXRlKHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgW2UudGFyZ2V0Lm5hbWVdOiBlLnRhcmdldC52YWx1ZVxuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHVzZXJuYW1lID0gc3RhdGUudXNlcm5hbWU7XG4gICAgY29uc3QgdXJsID0gYXBpVXJsXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KHVybCwge1xuICAgICAgICBlbWFpbDogdXNlcm5hbWUsXG4gICAgICAgIHBhc3N3b3JkOiBzdGF0ZS5wYXNzd29yZFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIGxvZ2luKHsgdG9rZW46IHJlc3BvbnNlLmRhdGEudG9rZW4gfSlcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnRXJyb3InLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2xvZ2luJz5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgPGxhYmVsIGh0bWxGb3I9J3VzZXJuYW1lJz5Mb2dpbjwvbGFiZWw+XG5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICBpZD0ndXNlcm5hbWUnXG4gICAgICAgICAgICBuYW1lPSd1c2VybmFtZSdcbiAgICAgICAgICAgIHZhbHVlPXtzdGF0ZS51c2VybmFtZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgLz5cblxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT0ncGFzc3dvcmQnXG4gICAgICAgICAgICBpZD0ncGFzc3dvcmQnXG4gICAgICAgICAgICBuYW1lPSdwYXNzd29yZCdcbiAgICAgICAgICAgIHZhbHVlPXtzdGF0ZS5wYXNzd29yZH1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgLz5cblxuICAgICAgICAgIDxidXR0b24gdHlwZT0nc3VibWl0Jz5Mb2dpbjwvYnV0dG9uPlxuXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPXtgZXJyb3IgJHtzdGF0ZS5lcnJvciAmJiAnc2hvdyd9YH0+XG4gICAgICAgICAgICB7c3RhdGUuZXJyb3IgJiYgYEVycm9yOiAke3N0YXRlLmVycm9yfWB9XG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLmxvZ2luIHtcbiAgICAgICAgICBtYXgtd2lkdGg6IDM0MHB4O1xuICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDFyZW07XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIH1cbiAgICAgICAgZm9ybSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWZsb3c6IGNvbHVtbjtcbiAgICAgICAgfVxuICAgICAgICBsYWJlbCB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCB7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIG1hcmdpbjogMC4zcmVtIDAgMXJlbTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgfVxuICAgICAgICAuZXJyb3Ige1xuICAgICAgICAgIG1hcmdpbjogMC41cmVtIDAgMDtcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICAgIGNvbG9yOiBicm93bjtcbiAgICAgICAgfVxuICAgICAgICAuZXJyb3Iuc2hvdyB7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5Mb2dpbi5nZXRJbml0aWFsUHJvcHMgPSBjdHggPT4ge1xuICBjb25zdCBhcGlVcmwgPSAnaHR0cDovL2xvY2FsaG9zdDo0MDAwL2F1dGhlbnRpY2F0ZSc7XG4gIGNvbnN0IHsgdG9rZW4gfSA9IGNvb2tpZXMoY3R4KTtcbiAgcmV0dXJuIHsgYXBpVXJsLCB0b2tlbiB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExvZ2luOyJdfQ== */\\n/*@ sourceURL=/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js */\"));\n};\n\nLogin.getInitialProps = function (ctx) {\n  var apiUrl = 'http://localhost:4000/authenticate';\n\n  var _cookies = cookies(ctx),\n      token = _cookies.token;\n\n  return {\n    apiUrl: apiUrl,\n    token: token\n  };\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js"],"names":["useState","axios","Router","cookies","login","auth","Login","apiUrl","username","password","error","state","setState","handleChange","e","target","name","value","handleSubmit","event","preventDefault","url","post","email","response","data","token","console","log","getInitialProps","ctx"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router'\nimport cookies from 'next-cookies';\nimport { login, auth } from '../utils/auth';\n\nconst Login = ({ apiUrl }) => {\n  const [state, setState] = useState({\n    username: '',\n    password: '',\n    error: ''\n  });\n\n  const handleChange = (e) => {\n    setState({\n      ...state,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault()\n    const username = state.username;\n    const url = apiUrl\n\n    try {\n      const response = await axios.post(url, {\n        email: username,\n        password: state.password\n      });\n\n      if (response.data) {\n        login({ token: response.data.token })\n      }\n\n    } catch (error) {\n      console.log('Error', error);\n    }\n  }\n\n  return (\n    <div>\n      <div className='login'>\n        <form onSubmit={handleSubmit}>\n          <label htmlFor='username'>Login</label>\n\n          <input\n            type='text'\n            id='username'\n            name='username'\n            value={state.username}\n            onChange={handleChange}\n          />\n\n          <input\n            type='password'\n            id='password'\n            name='password'\n            value={state.password}\n            onChange={handleChange}\n          />\n\n          <button type='submit'>Login</button>\n\n          <p className={`error ${state.error && 'show'}`}>\n            {state.error && `Error: ${state.error}`}\n          </p>\n        </form>\n      </div>\n      <style jsx>{`\n        .login {\n          max-width: 340px;\n          margin: 0 auto;\n          padding: 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        form {\n          display: flex;\n          flex-flow: column;\n        }\n        label {\n          font-weight: 600;\n        }\n        input {\n          padding: 8px;\n          margin: 0.3rem 0 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        .error {\n          margin: 0.5rem 0 0;\n          display: none;\n          color: brown;\n        }\n        .error.show {\n          display: block;\n        }\n      `}</style>\n    </div>\n  )\n}\n\nLogin.getInitialProps = ctx => {\n  const apiUrl = 'http://localhost:4000/authenticate';\n  const { token } = cookies(ctx);\n  return { apiUrl, token }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Component } from 'react';\nimport axios from 'axios';\nimport { login } from '../utils/auth';\n\nvar Login = /*#__PURE__*/function (_Component) {\n  _inherits(Login, _Component);\n\n  _createClass(Login, null, [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var req = _ref.req;\n      var apiUrl = 'http://localhost:4000/authenticate';\n      return {\n        apiUrl: apiUrl\n      };\n    }\n  }]);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n    _this.state = {\n      username: '',\n      password: '',\n      error: ''\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      this.setState(_objectSpread({}, this.state, _defineProperty({}, e.target.name, e.target.value)));\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var username, url, response, _ref2, token, error;\n\n      return _regeneratorRuntime.async(function handleSubmit$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              username = this.state.username;\n              url = this.props.apiUrl;\n              _context.prev = 3;\n              console.log(url);\n              console.log(this.state);\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(axios.post(url, {\n                email: username,\n                password: this.state.password\n              }));\n\n            case 8:\n              response = _context.sent;\n              console.log(response.data);\n\n              if (!response.ok) {\n                _context.next = 18;\n                break;\n              }\n\n              _context.next = 13;\n              return _regeneratorRuntime.awrap(response.json());\n\n            case 13:\n              _ref2 = _context.sent;\n              token = _ref2.token;\n              login({\n                token: token\n              });\n              _context.next = 22;\n              break;\n\n            case 18:\n              console.log('Login failed.'); // https://github.com/developit/unfetch#caveats\n\n              error = new Error(response.statusText);\n              error.response = response;\n              return _context.abrupt(\"return\", Promise.reject(error));\n\n            case 22:\n              _context.next = 28;\n              break;\n\n            case 24:\n              _context.prev = 24;\n              _context.t0 = _context[\"catch\"](3);\n              console.error('You have an error in your code or there are Network issues.', _context.t0);\n              throw new Error(_context.t0);\n\n            case 28:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[3, 24]], Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        className: \"jsx-923656326\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"jsx-923656326\" + \" \" + 'login',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, __jsx(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: \"jsx-923656326\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, __jsx(\"label\", {\n        htmlFor: \"username\",\n        className: \"jsx-923656326\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Login\"), __jsx(\"input\", {\n        type: \"text\",\n        id: \"username\",\n        name: \"username\",\n        value: this.state.username,\n        onChange: this.handleChange,\n        className: \"jsx-923656326\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }), __jsx(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handleChange,\n        className: \"jsx-923656326\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), __jsx(\"button\", {\n        type: \"submit\",\n        className: \"jsx-923656326\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Login\"), __jsx(\"p\", {\n        className: \"jsx-923656326\" + \" \" + \"error \".concat(this.state.error && 'show'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, this.state.error && \"Error: \".concat(this.state.error)))), __jsx(_JSXStyle, {\n        id: \"923656326\",\n        __self: this\n      }, \".login.jsx-923656326{max-width:340px;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}form.jsx-923656326{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}label.jsx-923656326{font-weight:600;}input.jsx-923656326{padding:8px;margin:0.3rem 0 1rem;border:1px solid #ccc;border-radius:4px;}.error.jsx-923656326{margin:0.5rem 0 0;display:none;color:brown;}.error.show.jsx-923656326{display:block;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb21lb2Vuc28vRGVza3RvcC9yZWZsdWVucy9yZWZsdWVucy1ob3RlbC1yZXNlcnZhdGlvbi9ob3RlbC1hcHAvcGFnZXMvbG9naW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNEZvQixBQUc2QixBQU9ILEFBSUcsQUFHSixBQU1NLEFBS0osWUFWTyxFQVd2QixFQXpCZ0IsQUFXaEIsRUFTZSxZQW5CQSxDQW9CRCxFQU5VLFVBYkEsQUFvQnhCLFlBTm9CLFVBYkEsUUFjcEIsQ0FWbUIsU0FIbkIsc0RBSUEiLCJmaWxlIjoiL1VzZXJzL3JvbWVvZW5zby9EZXNrdG9wL3JlZmx1ZW5zL3JlZmx1ZW5zLWhvdGVsLXJlc2VydmF0aW9uL2hvdGVsLWFwcC9wYWdlcy9sb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgeyBsb2dpbiB9IGZyb20gJy4uL3V0aWxzL2F1dGgnXG5cbmNsYXNzIExvZ2luIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIGdldEluaXRpYWxQcm9wcyAoeyByZXEgfSkge1xuICAgIGNvbnN0IGFwaVVybCA9ICdodHRwOi8vbG9jYWxob3N0OjQwMDAvYXV0aGVudGljYXRlJztcblxuICAgIHJldHVybiB7IGFwaVVybCB9XG4gIH1cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB1c2VybmFtZTogJycsXG4gICAgICBwYXNzd29yZDogJycsXG4gICAgICBlcnJvcjogJydcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlQ2hhbmdlID0gdGhpcy5oYW5kbGVDaGFuZ2UuYmluZCh0aGlzKVxuICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gdGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKVxuICB9XG5cbiAgaGFuZGxlQ2hhbmdlIChlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAuLi50aGlzLnN0YXRlLFxuICAgICAgW2UudGFyZ2V0Lm5hbWVdOiBlLnRhcmdldC52YWx1ZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBoYW5kbGVTdWJtaXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHVzZXJuYW1lID0gdGhpcy5zdGF0ZS51c2VybmFtZTtcbiAgICBjb25zdCB1cmwgPSB0aGlzLnByb3BzLmFwaVVybFxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKHVybCk7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlKVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KHVybCwge1xuICAgICAgICBlbWFpbDogdXNlcm5hbWUsXG4gICAgICAgIHBhc3N3b3JkOiB0aGlzLnN0YXRlLnBhc3N3b3JkXG4gICAgICB9KTtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICBsb2dpbih7IHRva2VuIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnTG9naW4gZmFpbGVkLicpXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kZXZlbG9waXQvdW5mZXRjaCNjYXZlYXRzXG4gICAgICAgIGxldCBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KVxuICAgICAgICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcilcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ1lvdSBoYXZlIGFuIGVycm9yIGluIHlvdXIgY29kZSBvciB0aGVyZSBhcmUgTmV0d29yayBpc3N1ZXMuJyxcbiAgICAgICAgZXJyb3JcbiAgICAgIClcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcilcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbG9naW4nPlxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0ndXNlcm5hbWUnPkxvZ2luPC9sYWJlbD5cblxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgIGlkPSd1c2VybmFtZSdcbiAgICAgICAgICAgICAgbmFtZT0ndXNlcm5hbWUnXG4gICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnVzZXJuYW1lfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT0ncGFzc3dvcmQnXG4gICAgICAgICAgICAgIGlkPSdwYXNzd29yZCdcbiAgICAgICAgICAgICAgbmFtZT0ncGFzc3dvcmQnXG4gICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnBhc3N3b3JkfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9J3N1Ym1pdCc+TG9naW48L2J1dHRvbj5cblxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXtgZXJyb3IgJHt0aGlzLnN0YXRlLmVycm9yICYmICdzaG93J31gfT5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZXJyb3IgJiYgYEVycm9yOiAke3RoaXMuc3RhdGUuZXJyb3J9YH1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgLmxvZ2luIHtcbiAgICAgICAgICAgIG1heC13aWR0aDogMzQwcHg7XG4gICAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICAgIHBhZGRpbmc6IDFyZW07XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3JtIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBmbGV4LWZsb3c6IGNvbHVtbjtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGFiZWwge1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5wdXQge1xuICAgICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgICAgbWFyZ2luOiAwLjNyZW0gMCAxcmVtO1xuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICB9XG4gICAgICAgICAgLmVycm9yIHtcbiAgICAgICAgICAgIG1hcmdpbjogMC41cmVtIDAgMDtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgICAgICBjb2xvcjogYnJvd247XG4gICAgICAgICAgfVxuICAgICAgICAgIC5lcnJvci5zaG93IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIH1cbiAgICAgICAgYH08L3N0eWxlPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExvZ2luIl19 */\\n/*@ sourceURL=/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js */\"));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["/Users/romeoenso/Desktop/refluens/refluens-hotel-reservation/hotel-app/pages/login.js"],"names":["Component","axios","login","Login","req","apiUrl","props","state","username","password","error","handleChange","bind","handleSubmit","e","setState","target","name","value","event","preventDefault","url","console","log","post","email","response","data","ok","json","token","Error","statusText","Promise","reject"],"mappings":"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","sourcesContent":["import { Component } from 'react';\nimport axios from 'axios';\nimport { login } from '../utils/auth'\n\nclass Login extends Component {\n  static getInitialProps ({ req }) {\n    const apiUrl = 'http://localhost:4000/authenticate';\n\n    return { apiUrl }\n  }\n\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      username: '',\n      password: '',\n      error: ''\n    };\n    this.handleChange = this.handleChange.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  handleChange (e) {\n    this.setState({\n      ...this.state,\n      [e.target.name]: e.target.value\n    })\n  }\n\n  async handleSubmit (event) {\n    event.preventDefault()\n    const username = this.state.username;\n    const url = this.props.apiUrl\n\n    try {\n      console.log(url);\n      console.log(this.state)\n      const response = await axios.post(url, {\n        email: username,\n        password: this.state.password\n      });\n      console.log(response.data);\n      if (response.ok) {\n        const { token } = await response.json()\n        login({ token })\n      } else {\n        console.log('Login failed.')\n        // https://github.com/developit/unfetch#caveats\n        let error = new Error(response.statusText)\n        error.response = response\n        return Promise.reject(error)\n      }\n    } catch (error) {\n      console.error(\n        'You have an error in your code or there are Network issues.',\n        error\n      )\n      throw new Error(error)\n    }\n  }\n\n  render () {\n    return (\n      <div>\n        <div className='login'>\n          <form onSubmit={this.handleSubmit}>\n            <label htmlFor='username'>Login</label>\n\n            <input\n              type='text'\n              id='username'\n              name='username'\n              value={this.state.username}\n              onChange={this.handleChange}\n            />\n\n            <input\n              type='password'\n              id='password'\n              name='password'\n              value={this.state.password}\n              onChange={this.handleChange}\n            />\n\n            <button type='submit'>Login</button>\n\n            <p className={`error ${this.state.error && 'show'}`}>\n              {this.state.error && `Error: ${this.state.error}`}\n            </p>\n          </form>\n        </div>\n        <style jsx>{`\n          .login {\n            max-width: 340px;\n            margin: 0 auto;\n            padding: 1rem;\n            border: 1px solid #ccc;\n            border-radius: 4px;\n          }\n          form {\n            display: flex;\n            flex-flow: column;\n          }\n          label {\n            font-weight: 600;\n          }\n          input {\n            padding: 8px;\n            margin: 0.3rem 0 1rem;\n            border: 1px solid #ccc;\n            border-radius: 4px;\n          }\n          .error {\n            margin: 0.5rem 0 0;\n            display: none;\n            color: brown;\n          }\n          .error.show {\n            display: block;\n          }\n        `}</style>\n      </div>\n    )\n  }\n}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}